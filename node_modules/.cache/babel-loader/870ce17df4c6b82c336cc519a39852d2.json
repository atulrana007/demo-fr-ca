{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/src/components/Authorize.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { AccountContext } from \"../providers/AccountContext\";\n\nconst Authorize = props => {\n  _s();\n\n  const {\n    isAuthenticated,\n    storeUserData,\n    AuthenticateUser,\n    webAuth\n  } = useContext(AccountContext);\n\n  const parseAuthToken = () => {\n    if (window.location.hash) {\n      var _props$config, _props$config2, _props$config2$extraP;\n\n      webAuth.parseHash({\n        hash: window.location.hash,\n        state: props === null || props === void 0 ? void 0 : (_props$config = props.config) === null || _props$config === void 0 ? void 0 : _props$config.state,\n        nonce: props === null || props === void 0 ? void 0 : (_props$config2 = props.config) === null || _props$config2 === void 0 ? void 0 : (_props$config2$extraP = _props$config2.extraParams) === null || _props$config2$extraP === void 0 ? void 0 : _props$config2$extraP.nonce\n      }, (err, res) => {\n        if (err) {\n          console.log(err);\n          localStorage.clear();\n          return;\n        }\n\n        const {\n          email,\n          name,\n          picture,\n          sub: id\n        } = res.idTokenPayload;\n        storeUserData({\n          email,\n          name,\n          picture,\n          id\n        });\n        AuthenticateUser(res.idToken);\n      });\n    }\n  };\n\n  useEffect(() => {\n    parseAuthToken();\n  }, []);\n\n  if (isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading....\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Authorize, \"ICY05Y8rh1sKZvtsPRrw4mLPNTA=\");\n\n_c = Authorize;\nexport default Authorize;\n\nvar _c;\n\n$RefreshReg$(_c, \"Authorize\");","map":{"version":3,"sources":["/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/src/components/Authorize.jsx"],"names":["React","useContext","useEffect","Redirect","AccountContext","Authorize","props","isAuthenticated","storeUserData","AuthenticateUser","webAuth","parseAuthToken","window","location","hash","parseHash","state","config","nonce","extraParams","err","res","console","log","localStorage","clear","email","name","picture","sub","id","idTokenPayload","idToken"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,cAAT,QAA+B,6BAA/B;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AACzB,QAAM;AAAEC,IAAAA,eAAF;AAAmBC,IAAAA,aAAnB;AAAkCC,IAAAA,gBAAlC;AAAoDC,IAAAA;AAApD,MACFT,UAAU,CAACG,cAAD,CADd;;AAGA,QAAMO,cAAc,GAAG,MAAM;AACzB,QAAIC,MAAM,CAACC,QAAP,CAAgBC,IAApB,EAA0B;AAAA;;AACtBJ,MAAAA,OAAO,CAACK,SAAR,CACI;AACID,QAAAA,IAAI,EAAEF,MAAM,CAACC,QAAP,CAAgBC,IAD1B;AAEIE,QAAAA,KAAK,EAAEV,KAAF,aAAEA,KAAF,wCAAEA,KAAK,CAAEW,MAAT,kDAAE,cAAeD,KAF1B;AAGIE,QAAAA,KAAK,EAAEZ,KAAF,aAAEA,KAAF,yCAAEA,KAAK,CAAEW,MAAT,4EAAE,eAAeE,WAAjB,0DAAE,sBAA4BD;AAHvC,OADJ,EAMI,CAACE,GAAD,EAAMC,GAAN,KAAc;AACV,YAAID,GAAJ,EAAS;AACLE,UAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAI,UAAAA,YAAY,CAACC,KAAb;AACA;AACH;;AAED,cAAM;AACFC,UAAAA,KADE;AAEFC,UAAAA,IAFE;AAGFC,UAAAA,OAHE;AAIFC,UAAAA,GAAG,EAAEC;AAJH,YAKFT,GAAG,CAACU,cALR;AAMAvB,QAAAA,aAAa,CAAC;AAAEkB,UAAAA,KAAF;AAASC,UAAAA,IAAT;AAAeC,UAAAA,OAAf;AAAwBE,UAAAA;AAAxB,SAAD,CAAb;AACArB,QAAAA,gBAAgB,CAACY,GAAG,CAACW,OAAL,CAAhB;AACH,OArBL;AAuBH;AACJ,GA1BD;;AA2BA9B,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAIJ,eAAJ,EAAqB;AACjB,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AACD,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CAvCD;;GAAMF,S;;KAAAA,S;AAyCN,eAAeA,SAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { AccountContext } from \"../providers/AccountContext\";\n\nconst Authorize = (props) => {\n    const { isAuthenticated, storeUserData, AuthenticateUser, webAuth } =\n        useContext(AccountContext);\n\n    const parseAuthToken = () => {\n        if (window.location.hash) {\n            webAuth.parseHash(\n                {\n                    hash: window.location.hash,\n                    state: props?.config?.state,\n                    nonce: props?.config?.extraParams?.nonce,\n                },\n                (err, res) => {\n                    if (err) {\n                        console.log(err);\n                        localStorage.clear();\n                        return;\n                    }\n\n                    const {\n                        email,\n                        name,\n                        picture,\n                        sub: id,\n                    } = res.idTokenPayload;\n                    storeUserData({ email, name, picture, id });\n                    AuthenticateUser(res.idToken);\n                }\n            );\n        }\n    };\n    useEffect(() => {\n        parseAuthToken();\n    }, []);\n\n    if (isAuthenticated) {\n        return <Redirect to=\"/dashboard\" />;\n    }\n    return <div>Loading....</div>;\n};\n\nexport default Authorize;\n"]},"metadata":{},"sourceType":"module"}