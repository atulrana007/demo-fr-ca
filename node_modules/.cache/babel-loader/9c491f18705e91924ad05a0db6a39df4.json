{"ast":null,"code":"import _defineProperty from\"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{AccountContext}from\"../providers/AccountContext\";import{CommonDataContext}from\"../providers/CommonDataContext\";import{validatePassword}from\"../validator/PasswordValidator\";export default function SignupContainer(props){var _useContext=useContext(AccountContext),SignupWithPassword=_useContext.SignupWithPassword,loginWithPassword=_useContext.loginWithPassword;var _useContext2=useContext(CommonDataContext),connections=_useContext2.connections;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),passwordRules=_useState4[0],setPasswordRules=_useState4[1];var _useState5=useState({email:\"\",password:\"\",confirmPassword:\"\"}),_useState6=_slicedToArray(_useState5,2),SignupForm=_useState6[0],setSignupForm=_useState6[1];var _useState7=useState({No_more_than_2_identical_characters_in_a_row:false,Special_characters:false,Lower_case_Upper_Case_Numbers:false,Length_Check:false,Non_empty_Password_Required:false}),_useState8=_slicedToArray(_useState7,2),PasswordPolicyState=_useState8[0],setPasswordPolicyState=_useState8[1];var _useState9=useState({email:\"\",isEmailError:\"\",databaseError:\"\",errorCode:\"\"}),_useState10=_slicedToArray(_useState9,2),SignupError=_useState10[0],setSignupError=_useState10[1];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(SignupForm.email!==\"\"&&SignupForm.password!==\"\"&&SignupForm.confirmPassword!==\"\"&&SignupForm.password===SignupForm.confirmPassword)){_context.next=16;break;}_context.prev=2;_context.next=5;return SignupWithPassword(SignupForm.email,SignupForm.password);case 5:res=_context.sent;if(!res.email){_context.next=9;break;}_context.next=9;return loginWithPassword(SignupForm.email,SignupForm.password);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setSignupError(_objectSpread(_objectSpread({},SignupError),{},{databaseError:_context.t0.description,errorCode:_context.t0.code}));case 14:_context.next=17;break;case 16:console.log(\"enter details\");case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var onClick=function onClick(e){setPasswordRules(connections[0]);};var onChange=function onChange(e){if(e.target.name===\"password\"&&passwordRules){validatePassword(passwordRules,e.target.value,PasswordPolicyState,setPasswordPolicyState,setIsValid);}setSignupForm(_objectSpread(_objectSpread({},SignupForm),{},_defineProperty({},e.target.name,e.target.value)));};var child=React.Children.only(props.children);return/*#__PURE__*/React.cloneElement(child,{onSubmit:onSubmit,SignupForm:SignupForm,onChange:onChange,onClick:onClick,passwordRules:passwordRules,PasswordPolicyState:PasswordPolicyState,isValid:isValid,SignupError:SignupError});}","map":{"version":3,"sources":["/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/src/containers/signupContainer.jsx"],"names":["React","useContext","useState","AccountContext","CommonDataContext","validatePassword","SignupContainer","props","SignupWithPassword","loginWithPassword","connections","isValid","setIsValid","passwordRules","setPasswordRules","email","password","confirmPassword","SignupForm","setSignupForm","No_more_than_2_identical_characters_in_a_row","Special_characters","Lower_case_Upper_Case_Numbers","Length_Check","Non_empty_Password_Required","PasswordPolicyState","setPasswordPolicyState","isEmailError","databaseError","errorCode","SignupError","setSignupError","onSubmit","e","preventDefault","res","description","code","console","log","onClick","onChange","target","name","value","child","Children","only","children","cloneElement"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { AccountContext } from \"../providers/AccountContext\";\nimport { CommonDataContext } from \"../providers/CommonDataContext\";\nimport { validatePassword } from \"../validator/PasswordValidator\";\n\nexport default function SignupContainer(props) {\n    const { SignupWithPassword, loginWithPassword } =\n        useContext(AccountContext);\n    const { connections } = useContext(CommonDataContext);\n\n    const [isValid, setIsValid] = useState(false);\n    const [passwordRules, setPasswordRules] = useState(null);\n    const [SignupForm, setSignupForm] = useState({\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n    });\n    const [PasswordPolicyState, setPasswordPolicyState] = useState({\n        No_more_than_2_identical_characters_in_a_row: false,\n        Special_characters: false,\n        Lower_case_Upper_Case_Numbers: false,\n        Length_Check: false,\n        Non_empty_Password_Required: false,\n    });\n    const [SignupError, setSignupError] = useState({\n        email: \"\",\n        isEmailError: \"\",\n        databaseError: \"\",\n        errorCode: \"\",\n    });\n\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        if (\n            SignupForm.email !== \"\" &&\n            SignupForm.password !== \"\" &&\n            SignupForm.confirmPassword !== \"\" &&\n            SignupForm.password === SignupForm.confirmPassword\n        ) {\n            try {\n                const res = await SignupWithPassword(\n                    SignupForm.email,\n                    SignupForm.password\n                );\n                if (res.email) {\n                    await loginWithPassword(\n                        SignupForm.email,\n                        SignupForm.password\n                    );\n                }\n            } catch (e) {\n                setSignupError({\n                    ...SignupError,\n                    databaseError: e.description,\n                    errorCode: e.code,\n                });\n            }\n        } else {\n            console.log(\"enter details\");\n        }\n    };\n\n    const onClick = (e) => {\n        setPasswordRules(connections[0]);\n    };\n    const onChange = (e) => {\n        if (e.target.name === \"password\" && passwordRules) {\n            validatePassword(\n                passwordRules,\n                e.target.value,\n                PasswordPolicyState,\n                setPasswordPolicyState,\n                setIsValid\n            );\n        }\n        setSignupForm({\n            ...SignupForm,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    const child = React.Children.only(props.children);\n    return React.cloneElement(child, {\n        onSubmit,\n        SignupForm,\n        onChange,\n        onClick,\n        passwordRules,\n        PasswordPolicyState,\n        isValid,\n        SignupError,\n    });\n}\n"]},"metadata":{},"sourceType":"module"}