{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useContext,useEffect}from\"react\";import{Redirect}from\"react-router-dom\";import{AccountContext}from\"../providers/AccountContext\";var Authorize=function Authorize(props){var _useContext=useContext(AccountContext),isAuthenticated=_useContext.isAuthenticated,storeUserData=_useContext.storeUserData,AuthenticateUser=_useContext.AuthenticateUser,webAuth=_useContext.webAuth;var parseAuthToken=function parseAuthToken(){if(window.location.hash){var _props$config,_props$config2,_props$config2$extraP;webAuth.parseHash({hash:window.location.hash,state:props===null||props===void 0?void 0:(_props$config=props.config)===null||_props$config===void 0?void 0:_props$config.state,nonce:props===null||props===void 0?void 0:(_props$config2=props.config)===null||_props$config2===void 0?void 0:(_props$config2$extraP=_props$config2.extraParams)===null||_props$config2$extraP===void 0?void 0:_props$config2$extraP.nonce},function(err,res){if(err){console.log(err);localStorage.clear();return;}var _res$idTokenPayload=res.idTokenPayload,email=_res$idTokenPayload.email,name=_res$idTokenPayload.name,picture=_res$idTokenPayload.picture,id=_res$idTokenPayload.sub;storeUserData({email:email,name:name,picture:picture,id:id});AuthenticateUser(res.idToken);});}};useEffect(function(){parseAuthToken();},[]);if(isAuthenticated){return/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}return/*#__PURE__*/_jsx(\"div\",{children:\"Loading....\"});};export default Authorize;","map":{"version":3,"sources":["/home/raramuri/Videos/McAfee-auth-Official/McAfee-odrplat-auth0-ui/src/components/Authorize.jsx"],"names":["React","useContext","useEffect","Redirect","AccountContext","Authorize","props","isAuthenticated","storeUserData","AuthenticateUser","webAuth","parseAuthToken","window","location","hash","parseHash","state","config","nonce","extraParams","err","res","console","log","localStorage","clear","idTokenPayload","email","name","picture","id","sub","idToken"],"mappings":"2CAAA,gDACA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,KAA6C,OAA7C,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,cAAT,KAA+B,6BAA/B,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,iBAErBL,UAAU,CAACG,cAAD,CAFW,CACjBG,eADiB,aACjBA,eADiB,CACAC,aADA,aACAA,aADA,CACeC,gBADf,aACeA,gBADf,CACiCC,OADjC,aACiCA,OADjC,CAIzB,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,GAAIC,MAAM,CAACC,QAAP,CAAgBC,IAApB,CAA0B,wDACtBJ,OAAO,CAACK,SAAR,CACI,CACID,IAAI,CAAEF,MAAM,CAACC,QAAP,CAAgBC,IAD1B,CAEIE,KAAK,CAAEV,KAAF,SAAEA,KAAF,gCAAEA,KAAK,CAAEW,MAAT,wCAAE,cAAeD,KAF1B,CAGIE,KAAK,CAAEZ,KAAF,SAAEA,KAAF,iCAAEA,KAAK,CAAEW,MAAT,gEAAE,eAAeE,WAAjB,gDAAE,sBAA4BD,KAHvC,CADJ,CAMI,SAACE,GAAD,CAAMC,GAAN,CAAc,CACV,GAAID,GAAJ,CAAS,CACLE,OAAO,CAACC,GAAR,CAAYH,GAAZ,EACAI,YAAY,CAACC,KAAb,GACA,OACH,CALS,wBAYNJ,GAAG,CAACK,cAZE,CAQNC,KARM,qBAQNA,KARM,CASNC,IATM,qBASNA,IATM,CAUNC,OAVM,qBAUNA,OAVM,CAWDC,EAXC,qBAWNC,GAXM,CAaVvB,aAAa,CAAC,CAAEmB,KAAK,CAALA,KAAF,CAASC,IAAI,CAAJA,IAAT,CAAeC,OAAO,CAAPA,OAAf,CAAwBC,EAAE,CAAFA,EAAxB,CAAD,CAAb,CACArB,gBAAgB,CAACY,GAAG,CAACW,OAAL,CAAhB,CACH,CArBL,EAuBH,CACJ,CA1BD,CA2BA9B,SAAS,CAAC,UAAM,CACZS,cAAc,GACjB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIJ,eAAJ,CAAqB,CACjB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAAP,CACH,CACD,mBAAO,oCAAP,CACH,CAvCD,CAyCA,cAAeF,CAAAA,SAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { AccountContext } from \"../providers/AccountContext\";\n\nconst Authorize = (props) => {\n    const { isAuthenticated, storeUserData, AuthenticateUser, webAuth } =\n        useContext(AccountContext);\n\n    const parseAuthToken = () => {\n        if (window.location.hash) {\n            webAuth.parseHash(\n                {\n                    hash: window.location.hash,\n                    state: props?.config?.state,\n                    nonce: props?.config?.extraParams?.nonce,\n                },\n                (err, res) => {\n                    if (err) {\n                        console.log(err);\n                        localStorage.clear();\n                        return;\n                    }\n\n                    const {\n                        email,\n                        name,\n                        picture,\n                        sub: id,\n                    } = res.idTokenPayload;\n                    storeUserData({ email, name, picture, id });\n                    AuthenticateUser(res.idToken);\n                }\n            );\n        }\n    };\n    useEffect(() => {\n        parseAuthToken();\n    }, []);\n\n    if (isAuthenticated) {\n        return <Redirect to=\"/dashboard\" />;\n    }\n    return <div>Loading....</div>;\n};\n\nexport default Authorize;\n"]},"metadata":{},"sourceType":"module"}