{"ast":null,"code":"import _defineProperty from\"/home/raramuri/Videos/mcafee/language-test/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/raramuri/Videos/mcafee/language-test/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/raramuri/Videos/mcafee/language-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/raramuri/Videos/mcafee/language-test/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/raramuri/Videos/mcafee/language-test/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{AccountContext}from\"../providers/AccountContext\";export default function LoginContainer(props){var _useContext=useContext(AccountContext),loginWithPassword=_useContext.loginWithPassword,otpLogin=_useContext.otpLogin,otpStart=_useContext.otpStart,getSocialLogin=_useContext.getSocialLogin;var _useState=useState({email:\"\",password:\"\",otp:\"\",otpAvailable:false,isSubmitting:false}),_useState2=_slicedToArray(_useState,2),LoginForm=_useState2[0],setLoginForm=_useState2[1];var _useState3=useState({email:\"\",isEmailError:\"\",databaseError:\"\",errorCode:\"\"}),_useState4=_slicedToArray(_useState3,2),LoginError=_useState4[0],setLoginError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),switchLogin=_useState6[0],setToggle=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),Continue=_useState8[0],setContinue=_useState8[1];var onToggle=function onToggle(){setToggle(!switchLogin);setLoginError(_objectSpread(_objectSpread({},LoginError),{},{email:\"\",databaseError:\"\",errorCode:\"\"}));};var onPressContinue=function onPressContinue(){setContinue(true);};var socialBtn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(name){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getSocialLogin(name);case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function socialBtn(_x){return _ref.apply(this,arguments);};}();var validateEmail=function validateEmail(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());};var onBlur=function onBlur(e){switch(e.target.name){case\"email\":if(!e.target.value){setLoginError(_objectSpread(_objectSpread({},LoginError),{},_defineProperty({isEmailError:true},e.target.name,\"Email is required\")));}else if(e.target.value&&!validateEmail(e.target.value)){setLoginError(_objectSpread(_objectSpread({},LoginError),{},_defineProperty({isEmailError:true},e.target.name,\"Email is not valid\")));}else{setLoginError(_objectSpread(_objectSpread({},LoginError),{},_defineProperty({isEmailError:false},e.target.name,\"\")));}break;default:break;}};var onChange=function onChange(e){setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},_defineProperty({},e.target.name,e.target.value)));onBlur(e);};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _err$code,_err$code2,_err$code3,_err$code4;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:true}));e.preventDefault();if(switchLogin){_context2.next=18;break;}_context2.prev=3;_context2.next=6;return loginWithPassword(LoginForm.email,LoginForm.password);case 6:setLoginError(_objectSpread(_objectSpread({},LoginError),{},{databaseError:\"\"}));setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:false}));_context2.next=16;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);console.log(\"ankit \",_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.code,_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message);console.log(_context2.t0,(_err$code=_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.code)!==null&&_err$code!==void 0?_err$code:_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.code);setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:false}));setLoginError(_objectSpread(_objectSpread({},LoginError),{},{databaseError:_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.description,errorCode:(_err$code2=_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.code)!==null&&_err$code2!==void 0?_err$code2:_context2.t0.message}));case 16:_context2.next=36;break;case 18:_context2.prev=18;if(!LoginForm.otpAvailable){_context2.next=25;break;}_context2.next=22;return otpLogin(LoginForm.email,LoginForm.otp);case 22:setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:false}));_context2.next=29;break;case 25:_context2.next=27;return otpStart(LoginForm.email);case 27:setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:false}));setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{otpAvailable:true}));case 29:_context2.next=36;break;case 31:_context2.prev=31;_context2.t1=_context2[\"catch\"](18);console.log(_context2.t1,(_err$code3=_context2.t1===null||_context2.t1===void 0?void 0:_context2.t1.code)!==null&&_err$code3!==void 0?_err$code3:_context2.t1===null||_context2.t1===void 0?void 0:_context2.t1.code);setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{isSubmitting:false}));setLoginError(_objectSpread(_objectSpread({},LoginError),{},{databaseError:_context2.t1===null||_context2.t1===void 0?void 0:_context2.t1.description,errorCode:(_err$code4=_context2.t1===null||_context2.t1===void 0?void 0:_context2.t1.code)!==null&&_err$code4!==void 0?_err$code4:_context2.t1===null||_context2.t1===void 0?void 0:_context2.t1.message}));case 36:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10],[18,31]]);}));return function onSubmit(_x2){return _ref2.apply(this,arguments);};}();var getOtp=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _err$code5;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setToggle(!switchLogin);_context3.next=4;return otpStart(LoginForm.email);case 4:setLoginForm(_objectSpread(_objectSpread({},LoginForm),{},{otpAvailable:true}));_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);setLoginError(_objectSpread(_objectSpread({},LoginError),{},{databaseError:_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.description,errorCode:(_err$code5=_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.code)!==null&&_err$code5!==void 0?_err$code5:_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.message}));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function getOtp(){return _ref3.apply(this,arguments);};}();var child=React.Children.only(props.children);return/*#__PURE__*/React.cloneElement(child,_objectSpread(_objectSpread({},props),{},{onChange:onChange,onToggle:onToggle,switchLogin:switchLogin,onSubmit:onSubmit,LoginForm:LoginForm,LoginError:LoginError,Continue:Continue,validateEmail:validateEmail,onPressContinue:onPressContinue,getOtp:getOtp,socialBtn:socialBtn}));}","map":{"version":3,"sources":["/home/raramuri/Videos/mcafee/language-test/src/containers/loginContainer.jsx"],"names":["React","useContext","useState","AccountContext","LoginContainer","props","loginWithPassword","otpLogin","otpStart","getSocialLogin","email","password","otp","otpAvailable","isSubmitting","LoginForm","setLoginForm","isEmailError","databaseError","errorCode","LoginError","setLoginError","switchLogin","setToggle","Continue","setContinue","onToggle","onPressContinue","socialBtn","name","console","log","validateEmail","re","test","String","toLowerCase","onBlur","e","target","value","onChange","onSubmit","preventDefault","code","message","description","getOtp","child","Children","only","children","cloneElement"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { AccountContext } from \"../providers/AccountContext\";\nexport default function LoginContainer(props) {\n    const { loginWithPassword, otpLogin, otpStart, getSocialLogin } =\n        useContext(AccountContext);\n\n    const [LoginForm, setLoginForm] = useState({\n        email: \"\",\n        password: \"\",\n        otp: \"\",\n        otpAvailable: false,\n        isSubmitting: false,\n    });\n    const [LoginError, setLoginError] = useState({\n        email: \"\",\n        isEmailError: \"\",\n        databaseError: \"\",\n        errorCode: \"\",\n    });\n    const [switchLogin, setToggle] = useState(false);\n\n    const [Continue, setContinue] = useState(false);\n\n    const onToggle = () => {\n        setToggle(!switchLogin);\n        setLoginError({\n            ...LoginError,\n            email: \"\",\n            databaseError: \"\",\n            errorCode: \"\",\n        });\n    };\n    const onPressContinue = () => {\n        setContinue(true);\n    };\n    const socialBtn = async (name) => {\n        try {\n            await getSocialLogin(name);\n        } catch (err) {\n            console.log(err);\n        }\n    };\n    const validateEmail = (email) => {\n        const re =\n            /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    };\n\n    const onBlur = (e) => {\n        switch (e.target.name) {\n            case \"email\":\n                if (!e.target.value) {\n                    setLoginError({\n                        ...LoginError,\n                        isEmailError: true,\n                        [e.target.name]: \"Email is required\",\n                    });\n                } else if (e.target.value && !validateEmail(e.target.value)) {\n                    setLoginError({\n                        ...LoginError,\n                        isEmailError: true,\n                        [e.target.name]: \"Email is not valid\",\n                    });\n                } else {\n                    setLoginError({\n                        ...LoginError,\n                        isEmailError: false,\n                        [e.target.name]: \"\",\n                    });\n                }\n                break;\n            default:\n                break;\n        }\n    };\n\n    const onChange = (e) => {\n        setLoginForm({\n            ...LoginForm,\n            [e.target.name]: e.target.value,\n        });\n        onBlur(e);\n    };\n\n    const onSubmit = async (e) => {\n        setLoginForm({\n            ...LoginForm,\n            isSubmitting: true,\n        });\n\n        e.preventDefault();\n        if (!switchLogin) {\n            try {\n                await loginWithPassword(LoginForm.email, LoginForm.password);\n                setLoginError({\n                    ...LoginError,\n                    databaseError: \"\",\n                });\n                setLoginForm({\n                    ...LoginForm,\n                    isSubmitting: false,\n                });\n            } catch (err) {\n                console.log(\"ankit \", err?.code, err?.message);\n                console.log(err, err?.code ?? err?.code);\n                setLoginForm({\n                    ...LoginForm,\n                    isSubmitting: false,\n                });\n                setLoginError({\n                    ...LoginError,\n                    databaseError: err?.description,\n                    errorCode: err?.code ?? err.message,\n                });\n            }\n        } else {\n            try {\n                if (LoginForm.otpAvailable) {\n                    await otpLogin(LoginForm.email, LoginForm.otp);\n                    setLoginForm({\n                        ...LoginForm,\n                        isSubmitting: false,\n                    });\n                } else {\n                    await otpStart(LoginForm.email);\n                    setLoginForm({\n                        ...LoginForm,\n                        isSubmitting: false,\n                    });\n                    setLoginForm({\n                        ...LoginForm,\n                        otpAvailable: true,\n                    });\n                }\n            } catch (err) {\n                console.log(err, err?.code ?? err?.code);\n                setLoginForm({\n                    ...LoginForm,\n                    isSubmitting: false,\n                });\n                setLoginError({\n                    ...LoginError,\n                    databaseError: err?.description,\n                    errorCode: err?.code ?? err?.message,\n                });\n            }\n        }\n    };\n    const getOtp = async () => {\n        try {\n            setToggle(!switchLogin);\n            await otpStart(LoginForm.email);\n            setLoginForm({\n                ...LoginForm,\n                otpAvailable: true,\n            });\n        } catch (err) {\n            console.log(err);\n            setLoginError({\n                ...LoginError,\n                databaseError: err?.description,\n                errorCode: err?.code ?? err?.message,\n            });\n        }\n    };\n\n    const child = React.Children.only(props.children);\n    return React.cloneElement(child, {\n        ...props,\n        onChange,\n        onToggle,\n        switchLogin,\n        onSubmit,\n        LoginForm,\n        LoginError,\n        Continue,\n        validateEmail,\n        onPressContinue,\n        getOtp,\n        socialBtn,\n    });\n}\n"]},"metadata":{},"sourceType":"module"}